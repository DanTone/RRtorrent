#summary Описание плагина ratio.

== Введение ==

Начиная с версии 0.8.5 в rTorrent появилась возможность устанавливать ограничения по ратио для групп закачек. Плагин реализует удобное управление данной возможностью. При установленном плагине в настройках ruTorrent появляется раздел "Группы ratio". В данном разделе можно задать ограничения по ратио для нескольких (по умолчанию - 8) групп. Назначение группы одной или нескольким закачкам осуществляется с помощью пункта в контекстном меню закачки.

Параметры группы следующие:
 * Min, % - минимальное ратио по достижении которого над закачкой будет произведено некое действие.
 * Max, % - максимальное ратио по достижении которого над закачкой будет произведено некое действие (максимальное ратио может отсутствовать).
 * UL, Мб - минимальное количество данных, которое должно быть отдано, прежде чем над закачкой будет произведено некое действие.
 * Действие - собственно, что предпринимать по достижении условия. Можно остановить закачку, удалить ее или остановить и очистить группу ратио.

Собственно, все эти условия можно выразить следующим образом: "Сидировать закачку, пока ее ратио не достигнет Min и при этом не будет отдано как минимум UL мегабайт. В любом случае прекратить сидирование, если ратио достигнет Max".

[http://rutorrent.googlecode.com/svn/wiki/ru/images/ratio.jpg]

== Как оно работает ==

После первой загрузки с установленным плагином ratio, ruTorrent создает группы с требуемыми параметрами ратио. Т.к. группы создаются только после первой загрузки ruTorrent, то в промежуток между стартом rTorrent и первым после этого стартом ruTorrent ограничения на ратио действовать не будут. Чтобы избежать этого, нужно добавить в конфигурационный файл rTorrent специально обученные строчки (см. ниже). 

== Дополнительная настройка плагина ==

Производится в файле `plugins/ratio/conf.php`.
    * `MAX_RATIO` - константа содержит максимальное количество групп. Вы можете изменить эту величину как в большую, так и в меньшую сторону.
    * `$isAutoStart` - переменная определяет способ начала работы. Если она равна true, то создание групп производится при загрузке ruTorrent. В противном случае Вы должны позаботиться о том, чтобы сделать это самостоятельно. Для этого в файл конфигурации rTorrent нужно добавить строчки
{{{
group.insert_persistent_view = rat_0
group.rat_0.ratio.enable=
group.rat_0.ratio.min.set=[min_limit_for_ratio0]
group.rat_0.ratio.max.set=[max_limit_for_ratio0]
group.rat_0.ratio.upload.set=[upload_limit_for_ratio0]
system.method.set = group.rat_0.ratio.command, [command]
...
group.insert_persistent_view = rat_MAX_RATIO
group.rat_MAX_RATIO.ratio.enable=
group.rat_MAX_RATIO.ratio.min.set=[min_limit_for_ratioMAX_RATIO]
group.rat_MAX_RATIO.ratio.max.set=[max_limit_for_ratioMAX_RATIO]
group.rat_MAX_RATIO.ratio.upload.set=[upload_limit_for_ratioMAX_RATIO]
system.method.set = group.rat_MAX_RATIO.ratio.command, [command]
}}}
где min_limit_for_ratio, max_limit_for_ratio, upload_limit_for_ratio - параметры ратио для конкретной группы, а command - предпринимаемое действие по достижению ратио. Оно может быть таким:
 * "d.stop=; d.close=" - остановить закачку.
 * "d.stop=; d.close=; d.erase=" - удалить закачку.