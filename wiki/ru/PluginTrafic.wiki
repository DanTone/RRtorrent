#summary Описание плагина trafic

== Введение ==

Плагин реализует подсистему регистрации трафика rTorrent по всем используемым трекерам. Доступны три позиции - почасовой график, по дням текущего месяца и по месяцам текущего года. Вы в любой момент можете очистить данные статистики, нажав на специально обученную кнопку на интерфейсе (см. скриншот). 

[http://rutorrent.googlecode.com/svn/wiki/ru/images/trafic_big.jpg http://rutorrent.googlecode.com/svn/wiki/ru/images/trafic_small.jpg]

== Чего требует для работы ==

    * Веб-сервер с поддержкой php 5.1. 

== Как оно работает ==

После первой загрузки с установленным плагином trafic, ruTorrent выдает команду планировщику rTorrent, который, в свою очередь, начинает периодически сообщать показания текущего трафика.

Еще раз обращаю внимание - процесс опроса начинается только после первой загрузки ruTorrent. Т.е. в промежуток между стартом rTorrent и первым после этого стартом ruTorrent никакой полезной работы производиться не будет. Чтобы избежать этого, нужно добавить в конфигурационный файл rTorrent специально обученную строчку (см. ниже).

== Некоторые неочевидные моменты ==

 * Время на графике соответствует серверному. Если установки времени на серверной и клиентской машине отличаются, Вы, возможно, будете иметь проблемы с интерпретацией графиков. Посему, если Вы, например, забыли выставить на сервере таймзону - рекомендуется таки сделать это, после чего очистить всю статистику.
 * Нажатие кнопки "Очистить" в позиции "Все трекеры" приведет к полной очистке всей статистики по всем трекерам. В позиции текущего трекера - только по нему, родному.
 * Показания трафика регистрируются для всех трекеров в нулевой группе каждой закачки. Для прочих групп - не регистрируются.
 * То, что Вы наблюдаете на графике, может не совпадать с показаниями статистики на сайте трекера. Т.к. плагин регистрирует только изменение цифирек для закачек, он не может знать - сообщены эти данные трекеру, или нет.

== Дополнительная настройка плагина ==

Производится в файле `plugins/trafic/conf.php`.
    * `$updateInterval` - переменная содержит интервал съема показаний трафика с rTorrent (в минутах). По умолчанию - 15 минут.
    * `$isAutoStart` - переменная определяет способ начала работы. Если она равна `true`, то команда планировщику rTorrent на начало работы выдается при загрузке ruTorrent. В противном случае Вы должны позаботиться о том, чтобы дать пинка планировщику самостоятельно. Для этого в файл конфигурации rTorrent нужно добавить строчку 
{{{
schedule = trafic,10,00:15:00,"execute={sh,-c,php full_path_to_plugin/update.php& exit 0}"
}}}
 где full_path_to_plugin - полный путь к плагину trafic.