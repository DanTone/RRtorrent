----
= Плагин create =
----

<wiki:toc />

== Описание ==

Плагин предоставляет возможность создания .torrent файлов. При установленном плагине в меню команд добавляется пункт "Новый торрент" ([http://rutorrent.googlecode.com/svn/wiki/images/icon08create.png]), использование которого приводит к появлению следующего диалога: 

[http://rutorrent.googlecode.com/svn/wiki/ru/images/PluginCreate/createbase.jpg]

 # "Выбор источника" - здесь указывается путь к содержимому, которое вы хотите раздать. Перед тем, как указывать путь, следует решить, будете ли вы раздавать один файл или несколько. Если вы создаете торрент из нескольких файлов, эти файлы должны располагаться в одной папке. Кроме них в папке ничего быть не должно.
 # "Трекеры" - список трекеров, на которых будет происходить раздача. Разные группы трекеров отделяются друг от друга пустой строкой.
 # "Комментарий" - к торренту можно добавлять комментарии (в ruTorrent эти комментарии будут отображаться в нижней части на вкладке "Общие").
 # "Размер части" - при создании торрента его содержимое дробится на мелкие части, которые более удобны в передаче и управлении. С помощью данной опции Вы можете выбирать размер частей. Общее правило таково: чем больше размер содержимого, тем большим должен быть и размер частей. В большинстве случаев для этого параметра будет достаточно оставить умолчательное значение (256К)
 # "Начать раздачу" - автоматически загружает созданный торрент в rTorrent сразу после завершения процесса. В некоторых случаях нужно отключить эту функцию. Например, если сайт, на который будет выполняться загрузка, требует "повторной закачки" торрента для раздачи (это происходит в тех случаях, если для сайта требуется пароль или cookies). Если эта функция не выбрана, вы должны будете вручную загрузить торрент в программу rTorrent для раздачи.
 # "Частный торрент" - отключает DHT (Distributed Hash Table) и PEX (Peer EXchange), которые являются альтернативными способами получения других пиров вместо трекера. Использование DHT и PEX особенно полезно в тех случаях, когда трекер по какой-либо причине недоступен. Однако некоторые частные сайты не разрешают применять эти функции, поскольку это не позволяет надлежащим образом следить за коэффициентами раздачи (т.к. при использовании DHT и PEX члены сайта могут раздавать торренты незарегистрированным пользователям).

После задания необходимых параметров смело жмите мышкой на кнопку "Создать". Вы должны увидеть примерно такую картину:

[http://rutorrent.googlecode.com/svn/wiki/ru/images/PluginCreate/createprocess.jpg]

Создание торрента находится в процессе, и все, что Вы можете сделать на данном этапе - это нажать кнопку "Остановить", если Вы почему-то желаете прервать этот процесс. В противном случае Вы должны дождаться завершения:

[http://rutorrent.googlecode.com/svn/wiki/ru/images/PluginCreate/createdone.jpg]

Теперь Вы можете нажать кнопку "Ссохранить". Процедура абсолютно аналогична сохранению файла в любом другом приложении.

== Известные недостатки ==

При использовании реализации механизма создания торрента, написанного на php, на 32-битных системах, плагин не обрабатывает файлы размером более 2 гигабайт. 
Эта неприятность вызвана ограничением php на работу с большими файлами. 
Обращаю внимание - размер *всей* закачки *может* превышать 2Г. Ограничение относится только к каждому единичному файлу внутри закачки.
Чтобы обойти данное ограничение, Вы должны
 # установить внешнюю программу создания .torrent файла 
 # настроить плагин соответствующим образом. 

== Дополнительная настройка плагина ==

Производится в файле plugins/create/conf.php. 
 * `$useExternal` - если данная переменная равна `false`, то для построения .torrent файла будет использоваться php скрипт. Прочие значения представляют собой имя внешней программы для построения .torrent файла (в кавычках). В настоящее время поддерживаются следующие программы:
   # [http://www.transmissionbt.com/ 'transmissioncli']
   # 'createtorrent' 
   # [http://mktorrent.sourceforge.net/ 'mktorrent']
   # [http://claudiusmaximus.goto10.org/cm/torrent.html 'buildtorrent']
 * `$pathToCreatetorrent` - переменная содержит путь к внешней программе. Если значение переменной - пустая строка (по умолчанию) то внешняя программа будет искаться в PATH пользователя веб-сервера. Данная настройка имеет смысл только для `$useExternal!=false`.