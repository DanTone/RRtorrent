----
=Плагин Geo IP=
----

== Описание ==

Плагин изменяет вид списка пиров. Плагин имеет несколько режимов, которые могут применяться как вместе, так и по отдельности:

 * Показ флага и названия страны пира
 * Показ названия города, организации и провайдера пира
 * Показ имени хоста вместо IP
 * Добавление и показ комментария к пиру

Выглядит это примерно так:

[http://rutorrent.googlecode.com/svn/wiki/ru/images/PluginGeoIP/geoip.jpg]

Замечу, что данный плагин может существенно замедлить обновление списка показываемых пиров. Для роутеров и прочих embedded систем применение плагина не рекомендую.

== Чего требует для работы ==

Для показа флагов и названий стран в PHP должен быть установлен модуль GeoIP. Об установке и конфигурации последнего можно почитать [http://us3.php.net/manual/en/book.geoip.php тут].
Для показа названий городов, кроме того, необходима база данных GeoIP версии City Edition. Для показа организаций и провайдеров, необходимы, соответственно, базы ISP и ORG Edition.
Для добавления и показа комментария к пиру необходимо наличие в системе php модуля sqlite. 

== Настройка ==

Производится в файле `plugins/geoip/conf.php`. Две переменные:

 * `$retrieveCountry` - если `true`, и модуль GeoIP установлен, то в списке пиров будет показан дополнительный столбец с названием страны и флаг страны. 
 * `$retrieveHost` - если `true`, то в списке пиров вместо IP адреса пира будет показано имя его хоста.
 * `$retrieveComments` - если `true`, то разрешено добавление и показ комментариев к пиру.
 * `$dnsResolver` - если `null`, то для преобразования IP в имя хоста будет использована функция php `gethostbyaddr`. В противном случае должна содержать IP DNS сервера, с которым плагин будет работать напрямую (как правило, это несколько быстрее). Настройка не имеет смысла в случае, если переменная `$retrieveHost` выставлена в `false`. По умолчанию значение переменной равно `8.8.8.8` (Google Public DNS).
 * `$dnsResolverTimeout` - таймаут в секундах для запросов к DNS серверу. Настройка не имеет смысла в случае, если переменная `$dnsResolver` выставлена в `null`.
