#labels Featured
----
=О ruTorrent=
----

<wiki:toc />

== Введение ==

ruTorrent был разработан на базе [http://www.utorrent.com/documentation/webui WebUI] к [http://utorrent.com µTorrent], соответственно, его внешний вид очень напоминает "родителя". Собственно, своим названием ruTorrent тоже обязан этому самому родителю - µTorrent + rTorrent = ruTorrent.
Начиная с версии 3.0 основной код был полностью переписан, в результате чего от предка только внешний вид и остался.

== Чего требует для работы ==

 * [http://libtorrent.rakshasa.no rTorrent] версии не менее 0.8.2, скомпилированный с поддержкой [http://ru.wikipedia.org/wiki/XMLRPC XMLRPC].
 * Веб-сервер с поддержкой php 5.0.
 * Браузер, как локальный клиент.
   * IE 7.0-9.0, Firefox 2.x-5.x - оптимальный выбор.
   * Opera 9.x-11.x - работает.
   * Safari 3.x-5.x - работает. Возможны проблемы с не отображением картинок при использовании протокола https. Полагаю, ошибка в браузере. Нужно подстраивать сервер, чтобы не держал keep-alive соединения, если клиент пользует Safari.
   * Google Chrome - работает. Возможны проблемы, аналогичные Safari.

 Прочие браузеры не проверял.

== Установка и настройка ==

См. [WebSERVER Настройка веб-сервера], [Config Установка и настройка ruTorrent]. 

== Чего не может ==

 * Аутентификация. В настоящий момент ruTorrent не поддерживает аутентификацию. Используйте соответствующие функции веб-сервера.

== Некоторые неочевидные моменты ==

 * Галку "Запрашивать сообщения трекера" в настройках ruTorrent можно включать только в том случае, если Вы используете версию rTorrent >= 0.8.5. В противном случае ее включение может привести к потере работоспособности ввиду некорректной обработки rTorrent сообщений трекера, содержащих не UTF-8 символы.
 * Настройки rTorrent, изменяемые пользователем через соответствующий диалог ruTorrent валидны только на время текущей сессии rTorrent. После рестарта последнего они будут утеряны.
 * Если вместо чисел больших 2 гигабайт ruTorrent показывает отрицательные числа, следует рекомпилировать rTorrent с более свежей версией xmlrpc-c. Минимально необходимая версия данной библиотеки - 1.11.
 * При изменении номера порта, на котором rTorrent будет ожидать запросы, необходимо так же внести коррективы в конфигурацию ruTorrent - указать этот же порт в файле rtorrent/conf.php в переменной `$scgi_port`.
 * Авторизация доступа реализуется полностью средствами используемого веб-сервера и от ruTorrent не зависит. Защищать нужно URL /rtorrent и, если используется scgi модуль веб-сервера - /RPC2. В случае использования вместо scgi модуля веб-сервера [Plugins плагина] ruTorrent [PluginRPC RPC] URL /RPC2 защищать не нужно.
 * Если Вы используете многопользовательскую конфигурацию, каждому пользователю должна соответстсвовать собственная точка монтирования scgi. Подробнее смотрте [Config Настройка] and [WebSERVER Настройка веб-сервера].

== Особенности браузеров ==

 * Для работы контекстного меню и отображения информации в статус-баре в Firefox и Opera необходимо в настройках браузера разрешить javascript-у выполнять соотв. операции.
 * Имеющиеся клавиатурные хоткеи можно посмотреть нажав F1. Более-менее корректно работает это пока только в Firefox.
 * Ряд аддонов к браузерам может привести к полной или частичной неработоспособности ruTorrent.

== Как оно работает ==

Начиная с версии 0.7.6 rTorrent поддерживает удаленное управление по протоколу [http://ru.wikipedia.org/wiki/XMLRPC XMLRPC] через [http://ru.wikipedia.org/wiki/SCGI SCGI] шлюз.
Работать напрямую с SCGI шлюзом браузер не может - протокол не позволяет, да и открывать этот шлюз на сервере "наружу" никто в здравом уме не будет. Зато браузер (а значит и ruTorrent) может работать с веб-сервером,
который, в свою очередь, переправляет команды в этот самый шлюз. Делать он это может двумя путями:
 # Используя соответствующий модуль `mod_scgi`, который "срезает" с запроса HTTP оболочку, "обертывает" запрос в SGCI, отсылает rTorrent-у, производит обратную операцию с ответом последнего и засылает ответ обратно браузеру.
 # Используя php скрипт, который принимает запрос от браузера, формирует на его основе запрос к rTorrent и проделывает обратную операцию с ответом rTorrent.
Каждый подход имеет свои плюсы и минусы. В первом случае веб-сервер не разбирает логику запроса а производит чисто техническую работу по конвертации одного протокола в другой. 
Следствия:
 * Быстрая обработка запроса, малая загрузка сервера.
 * Большой трафик между клиентом и сервером (клиент должен передавать и принимать уже готовый XML код, который в ряде случаев довольно велик по размеру).
 * Логика обмена полностью вынесена в клиентскую часть.
Во втором случае веб-сервер сам генерирует должный XML код, основыванный на запросе браузера (но не идентичный ему), и отдает браузеру уже "переработанный" ответ rTorrent-а.
Следствия:
 * Сравнительно медленная обработка запроса, большая загрузка сервера.
 * Малый трафик между клиентом и сервером.
 * Логика обмена полностью вынесена в серверную часть.
ruTorrent изначально создавался для работы со слабыми серверами с широким каналом передачи, поэтому в основном использует первый подход. Однако существует плагин [PluginHTTPRPC HTTPRPC], который "ставит все с ног на голову", т.е. переделывает логику работы для конфигурации "мощный сервер, узкий канал".

== [http://forums.rutorrent.org ruTorrent] Форум ==

Вопросы Вы можете задать на [http://forums.rutorrent.org форуме]. Предложения и сообщения об ошибках Вы можете засылать [http://code.google.com/p/rutorrent/issues/entry сюда].
