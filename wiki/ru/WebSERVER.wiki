----
= Настройка веб-серверов =
----

<wiki:toc />

== Введение ==

  # ruTorrent использует php 5.0, как следствие - Ваш веб-сервер должен поддерживать php данной версии.
  # ruTorrent [Main#%D0%9A%D0%B0%D0%BA_%D0%BE%D0%BD%D0%BE_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82 взаимодействует с rTorrent через SCGI шлюз]. Чтобы обеспечить сие взаимодействие Вы должны иметь:
    * Веб-сервер с модулем mod_scgi или аналогичным. Либо
    * Плагин [PluginRPC RPC]. Либо
    * Плагин [PluginHTTPRPC HTTPRPC].

== Настройка SCGI шлюза ==

Большинство веб-серверов поддерживают функциональность модуля mod_scgi в том или ином виде. Использование данного модуля имеет смысл в случае, если у Вас сравнительно маломощный сервер и широкий канал.
В случае узкого канала наиболее лучшим решением будет плагин [PluginHTTPRPC HTTPRPC] (однако для роутеров и прочих слабых embedded систем это не вариант).

===Apache===

Для Apache Вы должны установить модуль [http://python.ca/scgi/releases/ mod_scgi]. Способ различен для разных дистрибутивов ОС, например, для ubuntu/debian это делается так:

{{{
apt-get install libapache2-mod-scgi
}}}

для FreeBSD - так: 

{{{
cd /usr/ports/www/mod_scgi && make install clean
}}}

После чего добавить в apache2.conf строку

{{{
LoadModule scgi_module /usr/lib/apache2/modules/mod_scgi.so
}}}

А в файл настройки виртуального хоста

{{{
SCGIMount /RPC2 127.0.0.1:5000
}}}

===Lighttpd===

[http://www.lighttpd.net Lighttpd] имеет встроенный модуль mod_scgi но по умолчанию он отключен. Чтобы подключить, необходимо добавить в конец файла конфигурации строку
{{{
server.modules += ( "mod_scgi" )
}}}
или раскомментировать/добавить упоминание данного модуля в существующей секции server.modules.

Так же необходимо дописать секцию scgi.server:
{{{
scgi.server = (
        "/RPC2" =>
                ( "127.0.0.1" =>
                        (                
                                "host" => "127.0.0.1",
                                "port" => 5000,
                                "check-local" => "disable"
                        )
                )
        )
}}}
Если Вы имеете [Config#%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B0%D1%8F_%D0%B8_%D0%BE%D0%B4%D0%BD%D0%BE%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7 многопользвательскую установку] ruTorrent и несколько точек монтирования, то данная секция может выглядеть, например, так:
{{{
scgi.server = (
                "/RPC1"=>
                (
                        "127.0.0.1" =>
                        (
                                "host" => "127.0.0.1",
                                "port" => 5001,
                                "check-local" => "disable"
                        )
                ),
                "/RPC2"=>
                (
                        "127.0.0.1" =>
                        (
                                "host" => "127.0.0.1",
                                "port" => 5002,
                                "check-local" => "disable"
                        ),
                "/RPC3"=>
                (
                        "127.0.0.1" =>
                        (
                                "host" => "127.0.0.1",
                                "port" => 5003,
                                "check-local" => "disable"
                        ),
                "/RPC4"=>
                (
                        "127.0.0.1" =>
                        (
                                "host" => "127.0.0.1",
                                "port" => 5004,
                                "check-local" => "disable"
                        )
                )
)
}}}

===Cherokee===

Если Вы используетете [http://www.cherokee-project.com/doc/admin.html cherokee-admin], то для конфигурации шлюза достаточно выбрать 
закладку "behavior" для Вашего виртуального сервера, так:

http://img18.imageshack.us/img18/4320/cherokeescgi1.png

Выберите "wizards" и "misc" так:

http://img580.imageshack.us/img580/6915/cherokeescgi2.png

и, в завершение, выберите "rtorrent wizard" :

http://img29.imageshack.us/img29/2991/cherokeescgi3.png

===Nginx===

Мне неизвестны нормально работающие реализации модуля mod_scgi для nginx. Используйте плагин [PluginRPC RPC] или плагин [PluginHTTPRPC HTTPRPC].
