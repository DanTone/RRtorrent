----
= Плагин throttle =
----

<wiki:toc />

== Описание ==

Начиная с версии 0.8.5 в rTorrent появилась возможность устанавливать ограничения по скорости для групп закачек. Плагин реализует удобное управление данной возможностью. При установленном плагине в настройках ruTorrent появляется раздел "Каналы". В данном разделе можно задать ограничения по скорости для нескольких (по умолчанию - 10) каналов. Назначение канала одной или нескольким закачкам осуществляется с помощью пункта в контекстном меню закачки. Отмечу - цифра 0, традиционно для rTorrent, означает не запрет на скачку/раздачу, а отсутствие ограничений вообще. Таким образом минимально возможное ограничение на скорость равно 1 Кб/сек.

[http://rutorrent.googlecode.com/svn/wiki/ru/images/throttle.jpg]

Чтобы задать канал, который будет использоваться для всех новых закачек, используйте поле "Канал по умолчанию".

== Как оно работает ==

После первой загрузки с установленным плагином Throttle, ruTorrent создает каналы с требуемыми параметрами ограничений скорости.

Т.к. каналы создаются только после первой загрузки ruTorrent, то в промежуток между стартом rTorrent и первым после этого стартом ruTorrent ограничения на скорость действовать не будут. Чтобы избежать этого, нужно добавить в конфигурационный файл rTorrent [Plugins#%D0%90%D0%B2%D1%82%D0%BE%D1%81%D1%82%D0%B0%D1%80%D1%82_%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%BE%D0%B2 специально обученную строчку].

== Некоторые неочевидные моменты ==

 * Ограничения скорости применительно к группам закачек работают только тогда, когда имеются глобальные ограничения скорости для всей системы в целом (ума не приложу, зачем автор rTorrent реализовал такое безобразие). Чтобы избавиться от этой неприятности, при загрузке ruTorrent смотрит, установлены ли параметры upload_rate и download_rate в ноль. И если это так - заменяет 0 на ОченьБольшоеЧисло.
 * Смена канала может быть произведена только для остановленной закачки. Если последняя активна - плагин автоматически остановит ее, сменит канал и потом снова стартует.

== Дополнительная настройка плагина ==

Производится в файле `plugins/throttle/conf.php`.
    * `MAX_THROTTLE` - константа содержит максимальное количество каналов. Вы можете изменить эту величину как в большую, так и в меньшую сторону.