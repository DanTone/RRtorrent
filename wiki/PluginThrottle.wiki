#summary Описание плагина Throttle.

== Введение ==

Начиная с версии 0.8.5 в rTorrent появилась возможность устанавливать ограничения по скорости для групп закачек. Плагин реализует удобное управление данной возможностью. При установленном плагине в настройках ruTorrent появляется раздел "Каналы". В данном разделе можно задать ограничения по скорости для нескольких (по умолчанию - 10) каналов. Назначение канала одной или нескольким закачкам осуществляется с помощью пункта в контекстном меню закачки. Отмечу - цифра 0, традиционно для rTorrent, означает не запрет на скачку/раздачу, а отсутствие ограничений вообще. Таким образом минимально возможное ограничение на скорость равно 1 Кб/сек.

[http://vif2ne.ru/nvk/stuff/novik/rtorrent/wiki/en/throttle.jpg]

== Как оно работает ==

После первой загрузки с установленным плагином Throttle, ruTorrent создает каналы с требуемыми параметрами ограничений скорости.

Т.к. каналы создаются только после первой загрузки ruTorrent, то в промежуток между стартом rTorrent и первым после этого стартом ruTorrent ограничения на скорость действовать не будут. Чтобы избежать этого, нужно добавить в конфигурационный файл rTorrent специально обученные строчки (см. ниже).

== Некоторые неочевидные моменты ==

 * Ограничения скорости применительно к группам закачек работают только тогда, когда имеются глобальные ограничения скорости для всей системы в целом (ума не приложу, зачем автор rTorrent реализовал такое безобразие). Чтобы избавиться от этой неприятности, при загрузке ruTorrent смотрит, установлены ли параметры upload_rate и download_rate в ноль. И если это так - заменяет 0 на ОченьБольшоеЧисло.
 * Смена канала может быть произведена только для остановленной закачки. Если последняя активна - плагин автоматически остановит ее, сменит канал и потом снова стартует.

== Дополнительная настройка плагина ==

Производится в файле `plugins/throttle/conf.php`.
    * `MAX_THROTTLE` - константа содержит максимальное количество каналов. Вы можете изменить эту величину как в большую, так и в меньшую сторону.
    * `$isAutoStart` - переменная определяет способ начала работы. Если она равна `true`, то создание каналов производится при загрузке ruTorrent. В противном случае Вы должны позаботиться о том, чтобы сделать это самостоятельно. Для этого в файл конфигурации rTorrent нужно добавить строчки 
{{{throttle_up = thr_0,[up_limit_for_channel0]}}}

{{{throttle_down = thr_0,[down_limit_for_channel0]}}}

{{{...}}}

{{{throttle_up = thr_[MAX_THROTTLE],up_limit_for_channelMAX_THROTTLE}}}

{{{throttle_down = thr_[MAX_THROTTLE],down_limit_for_channelMAX_THROTTLE}}}

 где up_limit_for_channel, down_limit_for_channel - ограничения скорости отдачи/закачки в КБ/сек.
 * Если Вы поставили `$isAutoStart` в `false`, не забудьте так же выставить в конфигурационном файле rTorrent значения upload_rate и download_rate во что-либо отличное от нуля. Иначе локальные ограничения скорости работать не будут.